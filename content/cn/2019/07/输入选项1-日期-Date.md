---
title: "输入选项1 日期 Date"
date: 2019-07-26T10:46:45+08:00
draft: false
typora-root-url: ..\..\..\..\static
---

引言：Phoenix Model的“输入选项（Input Options）”选项卡的“日期?(Date?)”复选框勾选后，允许额外的映射一个“Date”字段，以便于输入日期。

 

# 1.界面变化

## 1.1.勾选“日期?(Date?)”复选框前的界面：

![1564109652319](/images/输入选项1-日期-Date/1564109652319.png)

## 1.2.勾选“日期?(Date?)”复选框前的界面：

  ![1564109697195](/images/输入选项1-日期-Date/1564109697195.png)

可以看到勾选后，映射列表的表头行新增了一个字段“Date”，“输入选项（Input Options）”选项卡也额外新增除了一个下拉框，用于选择日期的格式。

 

# 2.应用示例：

## 2.1.假设现在有一个这样的试验：

2019年3月28日是试验得第一天；

给药方案：试验第一天在上8点口服100mg药物，下午4点口服100mg药物，然后每天都重复该给药方案，持续到第4天；

采样方案：第1天8点给药后采集1、2、4、6时刻得血样，第4天8点给药后采集1、2、4、6时刻得血样。

 

## 2.2.我们现在尝试使用多种格式构建该数据集：

### 2.2.1.以第一次给药为0点：

| Subject | Time | Conc | Amount |
| ------- | ---- | ---- | ------ |
| 1       | 0    |      | 100    |
| 1       | 1    | 90   |        |
| 1       | 2    | 81   |        |
| 1       | 4    | 67   |        |
| 1       | 6    | 55   |        |
| 1       | 8    |      | 100    |
| 1       | 24   |      | 100    |
| 1       | 32   |      | 100    |
| 1       | 48   |      | 100    |
| 1       | 56   |      | 100    |
| 1       | 72   |      | 100    |
| 1       | 73   | 119  |        |
| 1       | 74   | 108  |        |
| 1       | 76   | 89   |        |
| 1       | 78   | 73   |        |
| 1       | 80   |      | 100    |

 

介绍，该样式是一种常用格式，也是储存数据的基本格式，时间点的计算以第一次给药开始为0点，然后记录其他事件的时间。

点评，软件一般最终都需要将数据转换为类似的格式进行最终的计算。

优点，清晰明了，格式规整，最为通用，便于直接使用数据进行计算，

缺点，作为人类很难一下子将表中的点和现实世界的时间联系起来。

 

### 2.2.2.天数+以现实世界的时间

| day  | Subject | Time | Conc | Amount |
| ---- | ------- | ---- | ---- | ------ |
| 1    | 1       | 8    |      | 100    |
| 1    | 1       | 9    | 90   |        |
| 1    | 1       | 10   | 81   |        |
| 1    | 1       | 12   | 67   |        |
| 1    | 1       | 14   | 55   |        |
| 1    | 1       | 16   |      | 100    |
| 2    | 1       | 8    |      | 100    |
| 2    | 1       | 16   |      | 100    |
| 3    | 1       | 8    |      | 100    |
| 3    | 1       | 16   |      | 100    |
| 4    | 1       | 8    |      | 100    |
| 4    | 1       | 9    | 119  |        |
| 4    | 1       | 10   | 108  |        |
| 4    | 1       | 12   | 89   |        |
| 4    | 1       | 14   | 73   |        |
| 4    | 1       | 16   |      | 100    |

 

 

介绍，也是一种储存数据的格式，需要额外增加了天数这一数据列，并指定试验开始的日期，作为天数的计算的起点（有的人喜欢把起点成为第0天，有的人喜欢把起点成为第1天），时间点的计算以每一天现实世界的0点为起点，然后记录其他事件的时间。

点评，数据集较大的时候人们，喜欢这种排布方式。

优点，清晰明了，格式规整，

缺点，直接用于计算略有不便。

 

### 2.2.3.天数+现实世界的时钟时间

| day  | Subject | Time  | Conc | Amount |
| ---- | ------- | ----- | ---- | ------ |
| 1    | 1       | 8:00  |      | 100    |
| 1    | 1       | 9:00  | 90   |        |
| 1    | 1       | 10:00 | 81   |        |
| 1    | 1       | 12:00 | 67   |        |
| 1    | 1       | 14:00 | 55   |        |
| 1    | 1       | 16:00 |      | 100    |
| 2    | 1       | 8:00  |      | 100    |
| 2    | 1       | 16:00 |      | 100    |
| 3    | 1       | 8:00  |      | 100    |
| 3    | 1       | 16:00 |      | 100    |
| 4    | 1       | 8:00  |      | 100    |
| 4    | 1       | 9:00  | 119  |        |
| 4    | 1       | 10:00 | 108  |        |
| 4    | 1       | 12:00 | 89   |        |
| 4    | 1       | 14:00 | 73   |        |
| 4    | 1       | 16:00 |      | 100    |

 

介绍，该样式也是一种常用样式，需要指定试验开始的日期，作为天数的计算的起点（有的人喜欢把起点成为第0天，有的人喜欢把起点成为第1天），然后结合现实世界的时钟记录每天发生的所有事件。

点评，

优点，作为人类可以非常容易的理解数据中的每一个时间，以及该时间点所对应的试验阶段，格式规整清晰，

缺点，不便于直接使用数据进行计算，如果你打算自己通过纸和笔计算或演算下数据，过程会无比痛苦，你不得将时间转换为第一种样式进行计算，这对计算机来说也一样，但计算机完成这些任务很轻松。

 

### 2.2.4.现实世界的日期+现实世界的时钟时间

| day        | Subject | Time  | Conc | Amount |
| ---------- | ------- | ----- | ---- | ------ |
| 2019-03-28 | 1       | 8:00  |      | 100    |
| 2019-03-28 | 1       | 9:00  | 90   |        |
| 2019-03-28 | 1       | 10:00 | 81   |        |
| 2019-03-28 | 1       | 12:00 | 67   |        |
| 2019-03-28 | 1       | 14:00 | 55   |        |
| 2019-03-28 | 1       | 16:00 |      | 100    |
| 2019-03-29 | 1       | 8:00  |      | 100    |
| 2019-03-29 | 1       | 16:00 |      | 100    |
| 2019-03-30 | 1       | 8:00  |      | 100    |
| 2019-03-30 | 1       | 16:00 |      | 100    |
| 2019-03-31 | 1       | 8:00  |      | 100    |
| 2019-03-31 | 1       | 9:00  | 119  |        |
| 2019-03-31 | 1       | 10:00 | 108  |        |
| 2019-03-31 | 1       | 12:00 | 89   |        |
| 2019-03-31 | 1       | 14:00 | 73   |        |
| 2019-03-31 | 1       | 16:00 |      | 100    |

 

介绍，该样式也是一种常用样式，完全使用现实世界的日期和时间。

点评，该样式与现实世界的时间完全一致，没有任何歧义，非常便于与团队内外所有人进行沟通，并且非常方便一线操作人员进行记录。

优点，便于记录方便，便于传输，便于协作，便于标准化，也是CDISC中使用的格式；

缺点，不便于直接使用数据进行计算，但在计算机化的今天，人们可以很方便的把该格式使用计算机转换为我们需要的任何类型。

 

随着试验的扩大，我们的记录可能我们的记录会从最便于计算的第一种逐渐便会最便于无歧义交流的第4种。

 

# 3.在Phoenix中的设置

第1种类型的数据，对于这种类型显而易见，无需勾选“日期?(Date?)”复选框，直接使用即可。

第2种类型的数据，需在勾选“日期?(Date?)”复选框后，把映射列表中的“Time”列映射至“Time”字段，“Day”列映射至“Date”列即可。

第3种类型的数据，需在勾选“日期?(Date?)”复选框后，把映射列表中的“Time”列映射至“Time”字段，“Day”列映射至“Date”列即可。

第4种类型的数据，勾选“日期?(Date?)”复选框后，需要通过下拉框选择下日期的格式是“Day-Month-Year”，“Month-Day-Year”，“Year-Month-Day”，“Year-Day-Month”这4种格式中的哪一种，对于本案例选择“Year-Month-Day”这一种，然后在映射列表将“Time”列映射至“Time”字段，将“Day”列映射至“Date”列即可。

 

# 4.小结

使用“日期?(Date?)”复选框可以帮助我们更灵活的排布数据集的时间列，是我们可以使用第2~4种排布格式，而不是仅被局限在第4种。